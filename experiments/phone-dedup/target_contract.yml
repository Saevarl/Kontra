# Target contract for user_with_primary view
# The transformation must produce output that passes all these rules

name: user_with_primary

rules:
  # One row per user
  - name: unique
    params:
      column: user_id

  # Every user must have a primary phone
  - name: not_null
    params:
      column: primary_phone

  # Must include all 10 users
  - name: min_rows
    params:
      threshold: 10

  # Must not have extra rows
  - name: max_rows
    params:
      threshold: 10
